import{d as x,o as D,a as n,c as o,b as e,m as E,v as V,F as B,r as A,e as S,w as I,t as l,n as N,f as g,g as u,k as h,h as L,i as M,l as R,_ as T}from"./index-DboNhKyU.js";const F={class:"public-bans"},O={class:"card",style:{"margin-bottom":"16px"}},U={class:"card"},$={key:0,class:"loading"},q={key:1},z={class:"id-cell"},G={key:0},K={key:2,class:"pagination"},Q=["disabled"],X={class:"page-info"},j=["disabled"],H={methods:{statusClass(i){switch(i){case"ACTIVE":return"danger";case"EXPIRED":return"offline";case"REVOKED":return"success";default:return""}},appealClass(i){switch(i){case"PENDING":return"warning";case"APPROVED":return"success";case"DENIED":return"danger";default:return""}}}},J=x({...H,__name:"PublicBansView",setup(i){const d=u([]),v=u(0),c=u(20),f=u(0),m=u(!1),p=u(""),_=h(()=>Math.ceil(v.value/c.value)),r=h(()=>Math.floor(f.value/c.value)+1),y=h(()=>{if(!p.value)return d.value;const a=p.value.toLowerCase();return d.value.filter(s=>s.playerName.toLowerCase().includes(a))});async function k(){m.value=!0;try{const a=await L.get("/api/public/bans",{params:{limit:c.value,offset:f.value}});d.value=a.data.bans,v.value=a.data.total}catch{d.value=[]}m.value=!1}function P(a){f.value=(a-1)*c.value,k()}function C(a){return new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function b(a){return a.isPermanent?"Permanent":a.expiresAt?C(a.expiresAt):"N/A"}return D(k),(a,s)=>{const w=M("router-link");return n(),o("div",F,[s[5]||(s[5]=e("div",{class:"page-header"},[e("h1",null,"Ban List"),e("p",{class:"subtitle"},"Public record of network bans")],-1)),e("div",O,[E(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>p.value=t),placeholder:"Filter by player name...",class:"search-input"},null,512),[[V,p.value]])]),e("div",U,[m.value?(n(),o("div",$,"Loading...")):(n(),o("table",q,[s[4]||(s[4]=e("thead",null,[e("tr",null,[e("th",null,"Player"),e("th",null,"Reason"),e("th",null,"Date"),e("th",null,"Expires"),e("th",null,"Status"),e("th",null,"Appeal"),e("th",null,"ID")])],-1)),e("tbody",null,[(n(!0),o(B,null,A(y.value,t=>(n(),o("tr",{key:t.id},[e("td",null,[S(w,{to:"/players/"+t.playerUuid,class:"player-link"},{default:I(()=>[R(l(t.playerName),1)]),_:2},1032,["to"])]),e("td",null,l(t.reason),1),e("td",null,l(C(t.issuedAt)),1),e("td",null,l(b(t)),1),e("td",null,[e("span",{class:N(["badge",a.statusClass(t.status)])},l(t.status),3)]),e("td",null,[t.appealStatus!=="NONE"?(n(),o("span",{key:0,class:N(["badge",a.appealClass(t.appealStatus)])},l(t.appealStatus),3)):g("",!0)]),e("td",z,l(t.id.substring(0,8)),1)]))),128)),y.value.length===0?(n(),o("tr",G,[...s[3]||(s[3]=[e("td",{colspan:"7",style:{"text-align":"center",color:"var(--text-muted)"}},"No bans found.",-1)])])):g("",!0)])])),_.value>1?(n(),o("div",K,[e("button",{disabled:r.value<=1,onClick:s[1]||(s[1]=t=>P(r.value-1))},"Prev",8,Q),e("span",X,"Page "+l(r.value)+" of "+l(_.value)+" ("+l(v.value)+" total)",1),e("button",{disabled:r.value>=_.value,onClick:s[2]||(s[2]=t=>P(r.value+1))},"Next",8,j)])):g("",!0)])])}}}),Y=T(J,[["__scopeId","data-v-c745088c"]]);export{Y as default};
