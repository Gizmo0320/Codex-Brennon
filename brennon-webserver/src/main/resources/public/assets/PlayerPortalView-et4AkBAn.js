import{d as S,o as P,x as b,a as o,c as n,b as t,e as i,w as d,F as c,t as l,n as A,r as x,f as v,g as p,i as w,s as N,l as _,_ as C}from"./index-DboNhKyU.js";const D={class:"portal"},I={class:"portal-nav"},L={class:"portal-links"},V={key:0,class:"portal-content"},B={class:"page-header"},R={class:"stat-grid"},F={class:"stat-card card"},O={class:"stat-value"},T={class:"stat-card card"},j={class:"stat-value"},z={class:"stat-card card"},E={class:"stat-value"},J={class:"stat-card card"},$={class:"stat-value"},M={key:0,class:"card"},W={class:"stats-grid"},Y={class:"stat-box-label"},q={class:"stat-box-value"},G={key:1,class:"card"},H={class:"badge offline"},K={key:1,class:"portal-content",style:{"text-align":"center","padding-top":"100px",color:"var(--text-secondary)"}},Q=S({__name:"PlayerPortalView",setup(U){const h=N(),s=p(null),u=p([]),m=p(!0);P(async()=>{try{const[g,e]=await Promise.all([b.get("/player/profile"),b.get("/player/punishments").catch(()=>({data:[]}))]);s.value=g.data,u.value=e.data}catch{alert("Failed to load profile")}m.value=!1});function k(){localStorage.removeItem("brennon_token"),localStorage.removeItem("brennon_role"),localStorage.removeItem("brennon_player_name"),localStorage.removeItem("brennon_player_uuid"),h.push("/player-login")}return(g,e)=>{var f;const r=w("router-link");return o(),n("div",D,[t("div",I,[e[3]||(e[3]=t("div",{class:"portal-brand"},[t("h2",null,"Brennon"),t("span",{class:"version"},"Player Portal")],-1)),t("div",L,[i(r,{to:"/portal",class:"nav-link","active-class":"active",exact:!0},{default:d(()=>[...e[0]||(e[0]=[_("Profile",-1)])]),_:1}),i(r,{to:"/portal/appeals",class:"nav-link","active-class":"active"},{default:d(()=>[...e[1]||(e[1]=[_("Appeals",-1)])]),_:1}),i(r,{to:"/portal/tickets",class:"nav-link","active-class":"active"},{default:d(()=>[...e[2]||(e[2]=[_("Tickets",-1)])]),_:1})]),t("button",{class:"logout-btn",onClick:k},"Logout")]),m.value?(o(),n("div",K," Loading... ")):(o(),n("div",V,[s.value?(o(),n(c,{key:0},[t("div",B,[t("h1",null,"Welcome, "+l(s.value.name),1),t("span",{class:A(["badge",s.value.online?"online":"offline"])},l(s.value.online?"Online":"Offline"),3)]),t("div",R,[t("div",F,[e[4]||(e[4]=t("div",{class:"stat-label"},"Balance",-1)),t("div",O,"$"+l((s.value.balance??0).toLocaleString()),1)]),t("div",T,[e[5]||(e[5]=t("div",{class:"stat-label"},"Ranks",-1)),t("div",j,l(((f=s.value.ranks)==null?void 0:f.map(a=>a.displayName).join(", "))||"None"),1)]),t("div",z,[e[6]||(e[6]=t("div",{class:"stat-label"},"Current Server",-1)),t("div",E,l(s.value.currentServer||"N/A"),1)]),t("div",J,[e[7]||(e[7]=t("div",{class:"stat-label"},"First Joined",-1)),t("div",$,l(new Date(s.value.firstJoin).toLocaleDateString()),1)])]),s.value.stats&&Object.keys(s.value.stats).length>0?(o(),n("div",M,[e[8]||(e[8]=t("h3",{style:{"margin-bottom":"12px"}},"Your Stats",-1)),t("div",W,[(o(!0),n(c,null,x(s.value.stats,(a,y)=>(o(),n("div",{key:y,class:"stat-box"},[t("div",Y,l(y),1),t("div",q,l(a),1)]))),128))])])):v("",!0),u.value.length>0?(o(),n("div",G,[e[11]||(e[11]=t("h3",{style:{"margin-bottom":"12px"}},"Active Punishments",-1)),t("table",null,[e[10]||(e[10]=t("thead",null,[t("tr",null,[t("th",null,"Type"),t("th",null,"Reason"),t("th",null,"Issued"),t("th",null,"Expires"),t("th",null,"Actions")])],-1)),t("tbody",null,[(o(!0),n(c,null,x(u.value,a=>(o(),n("tr",{key:a.id},[t("td",null,[t("span",H,l(a.type),1)]),t("td",null,l(a.reason),1),t("td",null,l(new Date(a.issuedAt).toLocaleDateString()),1),t("td",null,l(a.isPermanent?"Permanent":a.expiresAt?new Date(a.expiresAt).toLocaleDateString():"N/A"),1),t("td",null,[i(r,{to:`/portal/appeals?punishmentId=${a.id}`},{default:d(()=>[...e[9]||(e[9]=[t("button",{style:{"font-size":"12px",padding:"4px 10px"}},"Appeal",-1)])]),_:1},8,["to"])])]))),128))])])])):v("",!0)],64)):v("",!0)]))])}}}),Z=C(Q,[["__scopeId","data-v-086c9306"]]);export{Z as default};
