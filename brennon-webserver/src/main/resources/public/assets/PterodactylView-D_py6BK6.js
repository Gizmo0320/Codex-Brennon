import{d as L,l as R,j as f,o as i,c as r,a as e,F,n as B,q as j,t as n,A as P,e as b,b as U,v as V,p as I,i as q,r as v,_ as G}from"./index-DUiR62IA.js";const H={class:"server-grid"},W=["onClick"],J={class:"server-header"},O={key:0,class:"server-info"},Q={key:1,class:"server-info"},X={style:{color:"var(--text-secondary)"}},Y={class:"card"},Z={style:{"margin-bottom":"12px"}},ee={key:0,class:"status-grid"},te={class:"status-item"},se={class:"status-item"},ae={class:"status-item"},le={class:"status-item"},ne={class:"status-item"},oe={style:{display:"flex",gap:"8px","margin-top":"16px"}},ie=["disabled"],re=["disabled"],ue=["disabled"],de=["disabled"],ve={class:"card"},ce={style:{display:"flex",gap:"8px"}},pe=["disabled"],ye={key:0,class:"card"},me={style:{display:"flex","align-items":"center",gap:"8px","margin-bottom":"12px"}},fe={style:{color:"var(--text-secondary)","font-family":"monospace","font-size":"13px"}},ge={key:0},be={style:{display:"flex","align-items":"center",gap:"8px","margin-bottom":"8px"}},_e={style:{"font-family":"monospace","font-size":"13px",color:"var(--accent)"}},xe=["disabled"],ke={key:1},he=["onClick"],we={style:{"margin-right":"8px"}},Ce={key:0},Fe=L({__name:"PterodactylView",setup(Se){const S=v([]),o=v(null),u=v(null),g=v(""),p=v(!1),h=v(!1),d=v("/"),w=v([]),c=v(null),_=v(""),x=v(!1);R(D);async function D(){var a,t;try{const l=await f.get("/pterodactyl/servers");S.value=l.data}catch(l){alert(((t=(a=l.response)==null?void 0:a.data)==null?void 0:t.error)||"Failed to load servers")}}async function M(a){o.value=a,h.value=!1,c.value=null;try{const t=await f.get(`/pterodactyl/servers/${a}/status`);u.value=t.data}catch{u.value=null}}async function k(a){var t,l;if(o.value){p.value=!0;try{await f.post(`/pterodactyl/servers/${o.value}/power`,{action:a}),setTimeout(()=>M(o.value),2e3)}catch(s){alert(((l=(t=s.response)==null?void 0:t.data)==null?void 0:l.error)||"Power action failed")}p.value=!1}}async function z(){var a,t;if(!(!o.value||!g.value.trim())){p.value=!0;try{await f.post(`/pterodactyl/servers/${o.value}/command`,{command:g.value}),g.value=""}catch(l){alert(((t=(a=l.response)==null?void 0:a.data)==null?void 0:t.error)||"Command failed")}p.value=!1}}async function N(){o.value&&(h.value=!0,c.value=null,d.value="/",await C())}async function C(){var a,t;if(o.value)try{const l=await f.get(`/pterodactyl/servers/${o.value}/files`,{params:{dir:d.value}});w.value=l.data}catch(l){alert(((t=(a=l.response)==null?void 0:a.data)==null?void 0:t.error)||"Failed to list files")}}function K(a){d.value==="/"?d.value="/"+a:d.value+="/"+a,c.value=null,C()}function T(){const a=d.value.split("/");a.pop(),d.value=a.join("/")||"/",c.value=null,C()}async function A(a){var l,s;if(!o.value)return;const t=d.value==="/"?a:d.value+"/"+a;try{const m=await f.get(`/pterodactyl/servers/${o.value}/files/content`,{params:{file:t}});c.value=t,_.value=m.data.content}catch(m){alert(((s=(l=m.response)==null?void 0:l.data)==null?void 0:s.error)||"Failed to read file")}}async function E(){var a,t;if(!(!o.value||!c.value)){x.value=!0;try{await f.put(`/pterodactyl/servers/${o.value}/files/content`,{file:c.value,content:_.value}),alert("File saved")}catch(l){alert(((t=(a=l.response)==null?void 0:a.data)==null?void 0:t.error)||"Failed to save file")}x.value=!1}}function $(a){return a==="running"?"var(--success)":a==="starting"||a==="stopping"?"var(--warning)":"var(--danger)"}function y(a){return a>=1024?(a/1024).toFixed(1)+" GB":a+" MB"}return(a,t)=>{var l;return i(),r("div",null,[t[16]||(t[16]=e("div",{class:"page-header"},[e("h1",null,"Server Management")],-1)),e("div",H,[(i(!0),r(F,null,B(S.value,s=>{var m;return i(),r("div",{key:s.name,class:j(["card server-card",{active:o.value===s.name}]),onClick:Me=>M(s.name)},[e("div",J,[e("strong",null,n(s.name),1),e("span",{class:"state-dot",style:P({background:$(s.state||"offline")})},null,4)]),s.state&&s.state!=="unknown"?(i(),r("div",O,[e("span",null,"CPU: "+n(((m=s.cpu)==null?void 0:m.toFixed(1))||0)+"%",1),e("span",null,"RAM: "+n(y(s.memoryMb||0))+" / "+n(y(s.memoryLimitMb||0)),1)])):(i(),r("div",Q,[e("span",X,n(s.error||s.state||"Unknown"),1)]))],10,W)}),128))]),o.value?(i(),r(F,{key:0},[e("div",Y,[e("h3",Z,n(o.value),1),u.value?(i(),r("div",ee,[e("div",te,[t[7]||(t[7]=e("span",{class:"status-label"},"State",-1)),e("span",{style:P({color:$(u.value.state)})},n(u.value.state),5)]),e("div",se,[t[8]||(t[8]=e("span",{class:"status-label"},"CPU",-1)),e("span",null,n((l=u.value.cpu)==null?void 0:l.toFixed(1))+"%",1)]),e("div",ae,[t[9]||(t[9]=e("span",{class:"status-label"},"Memory",-1)),e("span",null,n(y(u.value.memoryMb))+" / "+n(y(u.value.memoryLimitMb)),1)]),e("div",le,[t[10]||(t[10]=e("span",{class:"status-label"},"Disk",-1)),e("span",null,n(y(u.value.diskMb)),1)]),e("div",ne,[t[11]||(t[11]=e("span",{class:"status-label"},"Network",-1)),e("span",null,n(y(u.value.networkRxMb||0))+" in / "+n(y(u.value.networkTxMb||0))+" out",1)])])):b("",!0),e("div",oe,[e("button",{class:"success",onClick:t[0]||(t[0]=s=>k("start")),disabled:p.value},"Start",8,ie),e("button",{onClick:t[1]||(t[1]=s=>k("restart")),disabled:p.value},"Restart",8,re),e("button",{class:"danger",onClick:t[2]||(t[2]=s=>k("stop")),disabled:p.value},"Stop",8,ue),e("button",{class:"danger",onClick:t[3]||(t[3]=s=>k("kill")),disabled:p.value,style:{background:"#991b1b"}},"Kill",8,de),e("button",{style:{"margin-left":"auto",background:"var(--bg-input)"},onClick:N},"Files")])]),e("div",ve,[t[12]||(t[12]=e("h3",{style:{"margin-bottom":"8px"}},"Send Command",-1)),e("div",ce,[U(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>g.value=s),placeholder:"say Hello World",onKeyup:I(z,["enter"])},null,544),[[V,g.value]]),e("button",{onClick:z,disabled:p.value},"Send",8,pe)])]),h.value?(i(),r("div",ye,[e("div",me,[t[13]||(t[13]=e("h3",null,"Files",-1)),e("span",fe,n(d.value),1),d.value!=="/"?(i(),r("button",{key:0,onClick:T,style:{"margin-left":"auto",background:"var(--bg-input)","font-size":"12px",padding:"4px 10px"}}," Up ")):b("",!0)]),c.value?(i(),r("div",ge,[e("div",be,[e("span",_e,n(c.value),1),e("button",{onClick:t[5]||(t[5]=s=>c.value=null),style:{"margin-left":"auto",background:"var(--bg-input)","font-size":"12px",padding:"4px 10px"}}," Close "),e("button",{onClick:E,disabled:x.value,class:"success",style:{"font-size":"12px",padding:"4px 10px"}},n(x.value?"Saving...":"Save"),9,xe)]),U(e("textarea",{"onUpdate:modelValue":t[6]||(t[6]=s=>_.value=s),rows:"20",style:{"font-family":"monospace","font-size":"13px",resize:"vertical"}},null,512),[[V,_.value]])])):(i(),r("table",ke,[t[15]||(t[15]=e("thead",null,[e("tr",null,[e("th",null,"Name"),e("th",null,"Size"),e("th",null,"Modified")])],-1)),e("tbody",null,[(i(!0),r(F,null,B(w.value,s=>(i(),r("tr",{key:s.name,style:{cursor:"pointer"},onClick:m=>s.isFile?s.isEditable?A(s.name):null:K(s.name)},[e("td",null,[e("span",we,n(s.isFile?"~":">"),1),q(" "+n(s.name),1)]),e("td",null,n(s.isFile?s.size>1024?(s.size/1024).toFixed(1)+" KB":s.size+" B":"-"),1),e("td",null,n(s.modifiedAt||"-"),1)],8,he))),128)),w.value.length===0?(i(),r("tr",Ce,[...t[14]||(t[14]=[e("td",{colspan:"3",style:{"text-align":"center",color:"var(--text-secondary)"}},"Empty directory",-1)])])):b("",!0)])]))])):b("",!0)],64)):b("",!0)])}}}),$e=G(Fe,[["__scopeId","data-v-02674b79"]]);export{$e as default};
