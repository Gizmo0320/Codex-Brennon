import{d as g,o as i,c as d,a as e,i as l,w as _,b as f,v as y,t as u,e as b,f as w,g as x,r,h as k,j as h,u as V,_ as C}from"./index-DUiR62IA.js";const I={class:"login-page"},S={class:"login-card card"},L={class:"form-group"},B={key:0,class:"error"},N=["disabled"],P={class:"switch-link"},A=g({__name:"PlayerLoginView",setup(D){const p=V(),n=r(""),o=r(""),a=r(!1);async function c(){if(o.value="",n.value.trim().length!==6){o.value="Code must be 6 digits";return}a.value=!0;try{const s=await h.post("/player-auth/verify",{code:n.value.trim()});localStorage.setItem("brennon_token",s.data.token),localStorage.setItem("brennon_role","player"),localStorage.setItem("brennon_player_name",s.data.name),localStorage.setItem("brennon_player_uuid",s.data.uuid),p.push("/portal"),window.location.reload()}catch{o.value="Invalid or expired code. Run /link in-game to get a new one."}a.value=!1}return(s,t)=>{const v=k("router-link");return i(),d("div",I,[e("div",S,[t[3]||(t[3]=e("h1",null,"Brennon",-1)),t[4]||(t[4]=e("p",null,"Player Portal",-1)),t[5]||(t[5]=e("div",{class:"instructions"},[e("span",{class:"step"},"1"),l(" Join the server and run "),e("code",null,"/link"),e("br"),e("span",{class:"step"},"2"),l(" Enter the 6-digit code below ")],-1)),e("form",{onSubmit:_(c,["prevent"])},[e("div",L,[t[1]||(t[1]=e("label",null,"Link Code",-1)),f(e("input",{"onUpdate:modelValue":t[0]||(t[0]=m=>n.value=m),type:"text",maxlength:"6",placeholder:"123456",autofocus:"",style:{"text-align":"center","font-size":"24px","letter-spacing":"8px"}},null,512),[[y,n.value]])]),o.value?(i(),d("div",B,u(o.value),1)):b("",!0),e("button",{type:"submit",disabled:a.value,style:{width:"100%","margin-top":"8px"}},u(a.value?"Verifying...":"Link Account"),9,N)],32),e("div",P,[w(v,{to:"/login"},{default:x(()=>[...t[2]||(t[2]=[l("Admin Login",-1)])]),_:1})])])])}}}),M=C(A,[["__scopeId","data-v-3b26453b"]]);export{M as default};
