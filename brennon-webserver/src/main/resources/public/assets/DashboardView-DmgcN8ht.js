import{d as g,l as k,k as f,m as C,o as n,c as o,a as l,e as h,F as D,n as x,t as d,r as c,_ as S,j as p,f as v}from"./index-DUiR62IA.js";import{S as m}from"./StatCard-CNInnuLd.js";const T={class:"activity-feed card"},F={key:0,class:"empty"},V={class:"event-time"},A={class:"event-type"},B={key:0,class:"event-detail"},E={key:1,class:"event-detail"},L=50,N=g({__name:"ActivityFeed",setup(b){const a=c([]);function r(e){a.value.unshift({type:e.type,data:e.data,timestamp:e.timestamp||Date.now()}),a.value.length>L&&a.value.pop()}function i(e){return e.replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase())}function u(e){return new Date(e).toLocaleTimeString()}return k(()=>{f.on("*",r)}),C(()=>{f.off("*",r)}),(e,t)=>(n(),o("div",T,[t[0]||(t[0]=l("h3",null,"Live Activity",-1)),a.value.length===0?(n(),o("div",F,"Waiting for events...")):h("",!0),(n(!0),o(D,null,x(a.value,(s,w)=>{var _,y;return n(),o("div",{key:w,class:"event-item"},[l("span",V,d(u(s.timestamp)),1),l("span",A,d(i(s.type)),1),(_=s.data)!=null&&_.name?(n(),o("span",B,d(s.data.name),1)):(y=s.data)!=null&&y.player?(n(),o("span",E,d(s.data.player),1)):h("",!0)])}),128))]))}}),O=S(N,[["__scopeId","data-v-5306cb02"]]),P={class:"stat-grid"},$=g({__name:"DashboardView",setup(b){const a=c(0),r=c(0),i=c(0),u=c({});return k(async()=>{try{const[e,t]=await Promise.all([p.get("/servers/online"),p.get("/modules")]);if(a.value=e.data.totalPlayers,r.value=e.data.serverCount,u.value=t.data,u.value.tickets){const s=await p.get("/tickets");i.value=s.data.length}}catch(e){console.error("Dashboard load error:",e)}}),(e,t)=>(n(),o("div",null,[t[0]||(t[0]=l("div",{class:"page-header"},[l("h1",null,"Dashboard")],-1)),l("div",P,[v(m,{label:"Online Players",value:a.value,color:"var(--success)"},null,8,["value"]),v(m,{label:"Servers Online",value:r.value,color:"var(--accent)"},null,8,["value"]),v(m,{label:"Open Tickets",value:i.value,color:"var(--warning)"},null,8,["value"])]),v(O)]))}});export{$ as default};
