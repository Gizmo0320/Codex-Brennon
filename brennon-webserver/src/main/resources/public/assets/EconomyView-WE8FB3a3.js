import{d as V,o as d,c as v,a,b as m,v as g,p as S,t as w,e as c,z as T,A as $,r as l,j as u}from"./index-DUiR62IA.js";const A={class:"card",style:{"margin-bottom":"16px"}},U={style:{display:"flex",gap:"8px"}},B={key:0,style:{"margin-top":"12px","font-size":"24px","font-weight":"700"}},C={key:0,class:"card"},E={class:"form-group"},z={class:"form-group"},D={key:0,class:"form-group"},K=V({__name:"EconomyView",setup(N){const y=l(""),n=l(""),r=l(null),i=l("deposit"),p=l(0),f=l(""),o=l("");async function b(){o.value="";try{const s=await u.get(`/players/name/${y.value}`);n.value=s.data.uuid;const e=await u.get(`/economy/${s.data.uuid}`);r.value=e.data.balance}catch{r.value=null,o.value="Player not found"}}async function x(){var s,e;if(o.value="",!!n.value)try{if(i.value==="transfer"){const k=await u.get(`/players/name/${f.value}`);await u.post("/economy/transfer",{from:n.value,to:k.data.uuid,amount:p.value})}else await u.post(`/economy/${i.value}`,{uuid:n.value,amount:p.value});const t=await u.get(`/economy/${n.value}`);r.value=t.data.balance,o.value="Success!"}catch(t){o.value=((e=(s=t.response)==null?void 0:s.data)==null?void 0:e.error)||"Action failed"}}return(s,e)=>(d(),v("div",null,[e[9]||(e[9]=a("div",{class:"page-header"},[a("h1",null,"Economy")],-1)),a("div",A,[a("div",U,[m(a("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>y.value=t),placeholder:"Player name...",onKeyup:S(b,["enter"])},null,544),[[g,y.value]]),a("button",{onClick:b},"Lookup")]),r.value!==null?(d(),v("div",B," Balance: $"+w(r.value.toFixed(2)),1)):c("",!0)]),n.value?(d(),v("div",C,[e[8]||(e[8]=a("h3",{style:{"margin-bottom":"12px"}},"Actions",-1)),a("div",E,[e[5]||(e[5]=a("label",null,"Action",-1)),m(a("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>i.value=t)},[...e[4]||(e[4]=[a("option",{value:"deposit"},"Deposit",-1),a("option",{value:"withdraw"},"Withdraw",-1),a("option",{value:"set"},"Set",-1),a("option",{value:"transfer"},"Transfer",-1)])],512),[[T,i.value]])]),a("div",z,[e[6]||(e[6]=a("label",null,"Amount",-1)),m(a("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>p.value=t),type:"number",step:"0.01"},null,512),[[g,p.value,void 0,{number:!0}]])]),i.value==="transfer"?(d(),v("div",D,[e[7]||(e[7]=a("label",null,"Transfer To (name)",-1)),m(a("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>f.value=t)},null,512),[[g,f.value]])])):c("",!0),a("button",{onClick:x},"Execute"),o.value?(d(),v("span",{key:1,style:$([{"margin-left":"12px"},{color:o.value==="Success!"?"var(--success)":"var(--danger)"}])},w(o.value),5)):c("",!0)])):c("",!0)]))}});export{K as default};
