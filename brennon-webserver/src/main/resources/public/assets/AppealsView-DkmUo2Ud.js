import{d as P,o as D,x as y,a as n,c as o,b as e,F as f,r as k,t as a,n as g,f as r,B as h,q as w,l as R,m as b,D as V,v as E,T as N,g as p,_ as C}from"./index-DboNhKyU.js";const B={class:"card"},I=["onClick"],O={key:0},S={class:"dialog card"},T={class:"detail-grid"},$={class:"detail-item"},F={class:"detail-item"},M={style:{"font-family":"monospace","font-size":"12px"}},U={key:0,class:"card",style:{background:"var(--bg-input)",margin:"12px 0"}},z={style:{"margin-top":"8px",color:"var(--text-secondary)","font-size":"13px"}},G={class:"badge offline"},L={style:{"margin-top":"4px"}},j={style:{"margin-top":"4px"}},q={key:0,style:{"margin-top":"4px"}},H={key:1,style:{"margin-top":"4px",color:"var(--danger)"}},J={class:"form-group"},K={class:"appeal-text"},Q={class:"form-group"},W={class:"form-group"},X={style:{display:"flex","justify-content":"flex-end",gap:"8px"}},Y=["disabled"],Z=P({__name:"AppealsView",setup(ee){const v=p([]),l=p(null),d=p(!1),u=p({status:"APPROVED",response:""}),m=p(!1);D(c);async function c(){const i=await y.get("/appeals");v.value=i.data}async function x(i){const s=await y.get(`/appeals/${i}`);l.value=s.data,d.value=!0,u.value={status:"APPROVED",response:""}}async function _(){var i,s;if(l.value){m.value=!0;try{await y.put(`/appeals/${l.value.id}/resolve`,u.value),d.value=!1,l.value=null,await c()}catch(t){alert(((s=(i=t.response)==null?void 0:i.data)==null?void 0:s.error)||"Failed to resolve appeal")}m.value=!1}}function A(i){return new Date(i).toLocaleString()}return(i,s)=>(n(),o("div",null,[s[15]||(s[15]=e("div",{class:"page-header"},[e("h1",null,"Ban Appeals")],-1)),e("div",B,[e("table",null,[s[5]||(s[5]=e("thead",null,[e("tr",null,[e("th",null,"Player"),e("th",null,"Reason"),e("th",null,"Status"),e("th",null,"Submitted"),e("th",null,"Actions")])],-1)),e("tbody",null,[(n(!0),o(f,null,k(v.value,t=>(n(),o("tr",{key:t.id},[e("td",null,a(t.playerName),1),e("td",null,a(t.reason.length>60?t.reason.substring(0,60)+"...":t.reason),1),e("td",null,[e("span",{class:g(["badge",t.status==="PENDING"?"pending":t.status==="APPROVED"?"online":"offline"])},a(t.status),3)]),e("td",null,a(A(t.createdAt)),1),e("td",null,[t.status==="PENDING"?(n(),o("button",{key:0,onClick:se=>x(t.id)},"Review",8,I)):r("",!0)])]))),128)),v.value.length===0?(n(),o("tr",O,[...s[4]||(s[4]=[e("td",{colspan:"5",style:{"text-align":"center",color:"var(--text-secondary)"}},"No pending appeals",-1)])])):r("",!0)])])]),(n(),h(N,{to:"body"},[d.value?(n(),o("div",{key:0,class:"overlay",onClick:s[3]||(s[3]=w(t=>d.value=!1,["self"]))},[e("div",S,[s[14]||(s[14]=e("h2",{style:{"margin-bottom":"16px"}},"Review Appeal",-1)),l.value?(n(),o(f,{key:0},[e("div",T,[e("div",$,[s[6]||(s[6]=e("span",{class:"detail-label"},"Player",-1)),e("span",null,a(l.value.playerName),1)]),e("div",F,[s[7]||(s[7]=e("span",{class:"detail-label"},"Punishment ID",-1)),e("span",M,a(l.value.punishmentId),1)])]),l.value.punishment?(n(),o("div",U,[s[9]||(s[9]=e("strong",null,"Punishment Details",-1)),e("div",z,[e("div",null,[s[8]||(s[8]=R("Type: ",-1)),e("span",G,a(l.value.punishment.type),1)]),e("div",L,"Reason: "+a(l.value.punishment.reason),1),e("div",j,"Issued: "+a(l.value.punishment.issuedAt),1),l.value.punishment.expiresAt?(n(),o("div",q," Expires: "+a(l.value.punishment.expiresAt),1)):r("",!0),l.value.punishment.isPermanent?(n(),o("div",H," Permanent Ban ")):r("",!0)])])):r("",!0),e("div",J,[s[10]||(s[10]=e("label",null,"Player's Appeal",-1)),e("div",K,a(l.value.reason),1)]),e("div",Q,[s[12]||(s[12]=e("label",null,"Decision",-1)),b(e("select",{"onUpdate:modelValue":s[0]||(s[0]=t=>u.value.status=t)},[...s[11]||(s[11]=[e("option",{value:"APPROVED"},"Approve (Unban)",-1),e("option",{value:"DENIED"},"Deny",-1)])],512),[[V,u.value.status]])]),e("div",W,[s[13]||(s[13]=e("label",null,"Staff Response",-1)),b(e("textarea",{"onUpdate:modelValue":s[1]||(s[1]=t=>u.value.response=t),rows:"3",placeholder:"Reason for your decision..."},null,512),[[E,u.value.response]])]),e("div",X,[e("button",{style:{background:"var(--bg-input)"},onClick:s[2]||(s[2]=t=>d.value=!1)},"Cancel"),e("button",{class:g(u.value.status==="APPROVED"?"success":"danger"),disabled:m.value,onClick:_},a(u.value.status==="APPROVED"?"Approve & Unban":"Deny Appeal"),11,Y)])],64)):r("",!0)])])):r("",!0)]))]))}}),le=C(Z,[["__scopeId","data-v-81fcb377"]]);export{le as default};
