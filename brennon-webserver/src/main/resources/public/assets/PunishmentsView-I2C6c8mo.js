import{d as A,a as u,c as o,b as e,m as b,v as f,A as U,f as g,t as i,F as $,r as V,n as P,B,q as k,T,g as d,x as v,_ as D}from"./index-DboNhKyU.js";const E={class:"card",style:{"margin-bottom":"16px"}},I={style:{display:"flex",gap:"8px"}},R={key:0,class:"card",style:{"margin-bottom":"16px"}},q={style:{display:"flex",gap:"8px","flex-wrap":"wrap"}},K={key:1,class:"card"},M={style:{"margin-bottom":"12px"}},N={class:"dialog card",style:{"min-width":"400px"}},S={class:"form-group"},_={class:"form-group"},F={key:0,class:"form-group"},j={style:{display:"flex",gap:"8px","justify-content":"flex-end"}},z=A({__name:"PunishmentsView",setup(H){const a=d(""),p=d([]),x=d(!1),m=d(!1),r=d("ban"),s=d({target:"",reason:"",issuer:"00000000-0000-0000-0000-000000000000",duration:0});async function c(){if(a.value){try{const t=(await v.get(`/players/name/${a.value}`)).data.uuid;a.value=t;const n=await v.get(`/punishments/${t}`);p.value=n.data}catch{try{const l=await v.get(`/punishments/${a.value}`);p.value=l.data}catch{p.value=[]}}x.value=!0}}function y(l){r.value=l,s.value={target:a.value,reason:"",issuer:"00000000-0000-0000-0000-000000000000",duration:0},m.value=!0}async function w(){var l,t;try{await v.post(`/punishments/${r.value}`,s.value),m.value=!1,a.value&&await c()}catch(n){alert(((t=(l=n.response)==null?void 0:l.data)==null?void 0:t.error)||"Action failed")}}async function h(){await v.delete(`/punishments/unban/${a.value}`),await c()}async function C(){await v.delete(`/punishments/unmute/${a.value}`),await c()}return(l,t)=>(u(),o("div",null,[t[15]||(t[15]=e("div",{class:"page-header"},[e("h1",null,"Punishments")],-1)),e("div",E,[e("div",I,[b(e("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>a.value=n),placeholder:"Player name or UUID...",onKeyup:U(c,["enter"])},null,544),[[f,a.value]]),e("button",{onClick:c},"Search")])]),x.value?(u(),o("div",R,[e("div",q,[e("button",{onClick:t[1]||(t[1]=n=>y("ban"))},"Ban"),e("button",{onClick:t[2]||(t[2]=n=>y("mute"))},"Mute"),e("button",{onClick:t[3]||(t[3]=n=>y("kick"))},"Kick"),e("button",{onClick:t[4]||(t[4]=n=>y("warn"))},"Warn"),e("button",{class:"success",onClick:h},"Unban"),e("button",{class:"success",onClick:C},"Unmute")])])):g("",!0),x.value?(u(),o("div",K,[e("h3",M,"History ("+i(p.value.length)+")",1),e("table",null,[t[10]||(t[10]=e("thead",null,[e("tr",null,[e("th",null,"Type"),e("th",null,"Reason"),e("th",null,"Issued"),e("th",null,"Expires"),e("th",null,"Active")])],-1)),e("tbody",null,[(u(!0),o($,null,V(p.value,n=>(u(),o("tr",{key:n.id},[e("td",null,i(n.type),1),e("td",null,i(n.reason),1),e("td",null,i(n.issuedAt),1),e("td",null,i(n.isPermanent?"Permanent":n.expiresAt||"N/A"),1),e("td",null,[e("span",{class:P(["badge",n.isActive?"online":"offline"])},i(n.isActive?"Active":"Expired"),3)])]))),128))])])])):g("",!0),(u(),B(T,{to:"body"},[m.value?(u(),o("div",{key:0,class:"overlay",onClick:t[9]||(t[9]=k(n=>m.value=!1,["self"]))},[e("div",N,[e("h3",null,i(r.value.charAt(0).toUpperCase()+r.value.slice(1))+" Player",1),e("form",{onSubmit:k(w,["prevent"])},[e("div",S,[t[11]||(t[11]=e("label",null,"Target UUID",-1)),b(e("input",{"onUpdate:modelValue":t[5]||(t[5]=n=>s.value.target=n),required:""},null,512),[[f,s.value.target]])]),e("div",_,[t[12]||(t[12]=e("label",null,"Reason",-1)),b(e("input",{"onUpdate:modelValue":t[6]||(t[6]=n=>s.value.reason=n),required:""},null,512),[[f,s.value.reason]])]),r.value==="ban"||r.value==="mute"?(u(),o("div",F,[t[13]||(t[13]=e("label",null,"Duration (ms, 0 = permanent)",-1)),b(e("input",{"onUpdate:modelValue":t[7]||(t[7]=n=>s.value.duration=n),type:"number"},null,512),[[f,s.value.duration,void 0,{number:!0}]])])):g("",!0),e("div",j,[e("button",{type:"button",onClick:t[8]||(t[8]=n=>m.value=!1),style:{background:"var(--bg-input)"}},"Cancel"),t[14]||(t[14]=e("button",{type:"submit",class:"danger"},"Execute",-1))])],32)])])):g("",!0)]))]))}}),W=D(z,[["__scopeId","data-v-4b01527b"]]);export{W as default};
