import{d as x,l as P,k as y,m as _,o as i,c as v,a as e,f,b as S,v as g,F as w,n as C,t as n,q as k,r as o,j as u}from"./index-DUiR62IA.js";import{S as h}from"./StatCard-CNInnuLd.js";const V={class:"stat-grid"},U={class:"card",style:{"margin-bottom":"16px"}},B={style:{display:"flex",gap:"8px"}},F={class:"card"},O=x({__name:"ServersView",setup(M){const d=o([]),p=o(0),s=o(""),r=o("");async function c(){const t=await u.get("/servers/online");p.value=t.data.totalPlayers;const l=await u.get("/servers");d.value=l.data}async function b(){var t,l;if(!(!s.value||!r.value))try{const a=await u.get(`/players/name/${s.value}`);await u.post("/servers/send",{uuid:a.data.uuid,server:r.value}),alert("Player sent!")}catch(a){alert(((l=(t=a.response)==null?void 0:t.data)==null?void 0:l.error)||"Failed to send player")}}function m(){c()}return P(()=>{c(),y.on("server_status",m)}),_(()=>{y.off("server_status",m)}),(t,l)=>(i(),v("div",null,[l[4]||(l[4]=e("div",{class:"page-header"},[e("h1",null,"Servers")],-1)),e("div",V,[f(h,{label:"Total Players",value:p.value,color:"var(--success)"},null,8,["value"]),f(h,{label:"Servers",value:d.value.length,color:"var(--accent)"},null,8,["value"])]),e("div",U,[l[2]||(l[2]=e("h3",{style:{"margin-bottom":"8px"}},"Send Player",-1)),e("div",B,[S(e("input",{"onUpdate:modelValue":l[0]||(l[0]=a=>s.value=a),placeholder:"Player name..."},null,512),[[g,s.value]]),S(e("input",{"onUpdate:modelValue":l[1]||(l[1]=a=>r.value=a),placeholder:"Server name..."},null,512),[[g,r.value]]),e("button",{onClick:b},"Send")])]),e("div",F,[e("table",null,[l[3]||(l[3]=e("thead",null,[e("tr",null,[e("th",null,"Name"),e("th",null,"Group"),e("th",null,"Players"),e("th",null,"Max"),e("th",null,"Status")])],-1)),e("tbody",null,[(i(!0),v(w,null,C(d.value,a=>(i(),v("tr",{key:a.name},[e("td",null,n(a.name),1),e("td",null,n(a.group),1),e("td",null,n(a.playerCount),1),e("td",null,n(a.maxPlayers),1),e("td",null,[e("span",{class:k(["badge",a.online?"online":"offline"])},n(a.online?"Online":"Offline"),3)])]))),128))])])])]))}});export{O as default};
