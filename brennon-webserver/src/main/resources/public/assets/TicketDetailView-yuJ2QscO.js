import{d as k,l as x,j as d,o as n,c as l,a as t,t as s,B as h,e as p,F as v,n as w,q as S,b,v as C,s as T,r as y,_ as N}from"./index-DUiR62IA.js";const R={class:"page-header"},B={key:0,style:{display:"flex",gap:"8px"}},D={class:"card"},M={style:{"margin-top":"8px",display:"flex",gap:"16px",color:"var(--text-secondary)"}},V={class:"card"},$={class:"msg-header"},I={key:0,class:"badge online",style:{"margin-left":"8px"}},P={style:{color:"var(--text-secondary)","margin-left":"auto","font-size":"12px"}},j={class:"msg-content"},z={class:"card"},E=k({__name:"TicketDetailView",setup(F){const i=T().params.id.toUpperCase(),e=y(null),r=y("");x(u);async function u(){const c=await d.get(`/tickets/${i}`);e.value=c.data}async function f(){r.value.trim()&&(await d.post(`/tickets/${i}/reply`,{author:"00000000-0000-0000-0000-000000000000",authorName:"Dashboard",content:r.value,isStaff:!0}),r.value="",await u())}async function m(c){await d.put(`/tickets/${i}/status`,{status:c}),await u()}async function _(){await d.put(`/tickets/${i}/close`,{closedBy:"00000000-0000-0000-0000-000000000000"}),await u()}return(c,a)=>(n(),l("div",null,[t("div",R,[t("h1",null,"Ticket "+s(h(i)),1),e.value?(n(),l("div",B,[t("button",{onClick:a[0]||(a[0]=o=>m("IN_PROGRESS"))},"In Progress"),t("button",{class:"danger",onClick:_},"Close")])):p("",!0)]),e.value?(n(),l(v,{key:0},[t("div",D,[t("h2",null,s(e.value.subject),1),t("div",M,[t("span",null,"Creator: "+s(e.value.creatorName),1),t("span",null,"Status: "+s(e.value.status),1),t("span",null,"Priority: "+s(e.value.priority),1),t("span",null,"Server: "+s(e.value.server),1)])]),t("div",V,[a[2]||(a[2]=t("h3",{style:{"margin-bottom":"12px"}},"Messages",-1)),(n(!0),l(v,null,w(e.value.messages,(o,g)=>(n(),l("div",{key:g,class:S(["message",{staff:o.isStaffMessage}])},[t("div",$,[t("strong",null,s(o.authorName),1),o.isStaffMessage?(n(),l("span",I,"Staff")):p("",!0),t("span",P,s(o.timestamp),1)]),t("div",j,s(o.content),1)],2))),128))]),t("div",z,[a[3]||(a[3]=t("h3",{style:{"margin-bottom":"8px"}},"Reply",-1)),b(t("textarea",{"onUpdate:modelValue":a[1]||(a[1]=o=>r.value=o),rows:"3",placeholder:"Type your reply..."},null,512),[[C,r.value]]),t("button",{onClick:f,style:{"margin-top":"8px"}},"Send Reply")])],64)):p("",!0)]))}}),G=N(E,[["__scopeId","data-v-564cbaf9"]]);export{G as default};
